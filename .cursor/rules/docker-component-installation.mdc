---
description: Ensure plans include Docker installation steps for new components
alwaysApply: true
---

# Docker Component Installation

When planning features that require new components in the Docker development environment, always include installation steps in the plan.

## When This Applies

Include Docker installation steps when adding:

- **Services**: Redis, Meilisearch, Elasticsearch, message queues, etc.
- **PHP Extensions**: New extensions not already in `docker/Dockerfile`
- **System Packages**: OS-level packages (e.g., imagemagick, ffmpeg)
- **Native Dependencies**: npm packages requiring native builds

## Required Plan Items

When a feature needs Docker component installation, the plan MUST include:

1. **Dockerfile changes** (`docker/Dockerfile`) - Package/extension installation
2. **docker-compose.yml changes** - New services, environment variables, volumes
3. **entrypoint.sh changes** (`docker/entrypoint.sh`) - If runtime setup is needed
4. **.env.example updates** - New environment variables for the component
5. **Rebuild instructions** - Note that `docker-compose up -d --build` is required

## Example Plan Section

When adding a component like Redis:

- Update `docker/Dockerfile` to install php-redis extension
- Update `docker-compose.yml` to add Redis service
- Update `.env.example` with `REDIS_HOST`, `REDIS_PORT`
- Note: Requires `docker-compose up -d --build` to apply changes

## Verification

Before finalizing a plan, verify:

- [ ] All new Docker components have installation steps
- [ ] Dockerfile changes are specified if packages/extensions needed
- [ ] docker-compose.yml changes are specified if services needed
- [ ] Environment variables documented in .env.example
